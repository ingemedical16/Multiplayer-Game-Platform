<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login page</title>
    <link rel="stylesheet" href="/css/style.css" />
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      $(document).ready(function() {
            // Handle form submission
            $('#loginForm').on('submit', function(e) {
                e.preventDefault();
                
                const email = $('#email').val();
                const password = $('#password').val();
                const username = $('#username').val();
                
                $.ajax({
                    url: '/api/auth/signup',  // Adjust to your login API route
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        email: email,
                        password: password,
                        username:username
                    }),
                    success: function(response) {
                        
                        window.location.href = "/api/auth/login";  
                    },
                    error: function(xhr, status, error) {
                        // Show error message
                        $('#errorMessage').text(xhr.responseJSON?.message || 'Login failed. Please try again.');
                        $('#errorMessage').removeClass('d-none');
                    }
                });
            });
        });
   
    </script>
  </head>
  <body>
    <header>
      <!-- Navigation Bar -->
 <nav class="navbar">
   <div class="navbar-container">
     <a href="/" class="navbar-logo">Game Platform</a>
     <ul class="nav-menu">
       <li class="nav-item">
         <a href="/" class="nav-link">Home</a>
       </li>
       <li class="nav-item">
         <a href="/blockland" class="nav-link">Blockland</a>
       </li>
       <li class="nav-item">
         <a href="/starwar" class="nav-link">Star War</a>
       </li>
       <li class="nav-item">
         <a href="#" class="nav-link">Profile</a>
       </li>
       <li class="nav-item">
         <a href="/api/auth/login" class="nav-link">Login</a>
       </li>
       <li class="nav-item">
         <a href="/api/auth/signup" class="nav-link">Sign Up</a>
       </li>
       <li class="nav-item">
         <a href="#" class="nav-link">Logout</a>
       </li>
     </ul>
   </div>
 </nav>
   </header>
    <div id="loginSection">
      <!-- ring div starts here -->
      <div id="ring" class="ring">
        <i style="--clr: #00ff0a"></i>
        <i style="--clr: #ff0057"></i>
        <i style="--clr: #fffd44"></i>

        <div class="login">
          <h2>REGISTER</h2>
          <div id="errorMessage" class="alert alert-danger d-none"></div>
          <form id="loginForm">
            <!-- username field -->
            <div class="inputBx">
              <input
                id="username"
                type="text"
                name="username"
                placeholder="Entre votre Nom"
              />
            </div>
            <!-- Email field -->
            <div class="inputBx">
              <input
                id="email"
                type="email"
                name="email"
                placeholder="Entre votre E-mail"
              />
            </div>

            <!-- Password field -->
            <div class="inputBx">
              <input
                id="password"
                type="password"
                name="password"
                placeholder="Entre votre password"
              />
            </div>

            <!-- Submit button -->
            <div class="inputBx">
              <input id="loginBtn" type="submit" value="Register" />
            </div>
          </form>
          <div className='text-center text-slate-600 pt-1'>
            <p class="nav-item" style="color: aliceblue;">Vous avez  Un compte? <a style="color: aliceblue;" href="/api/auth/login">Se connecter</a></p>
        </div> 
        </div>
      </div>
      <!-- ring div ends here -->
    </div>
  </body>
</html>
